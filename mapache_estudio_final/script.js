document.addEventListener('DOMContentLoaded',()=>{const grid=document.getElementById('product-grid');fetch('data/products.json').then(r=>r.json()).then(data=>{data.forEach(p=>{const card=document.createElement('div');card.className='card';card.innerHTML=`<img src='${p.image}' alt='${p.title}'><div class='title'>${p.title}</div><div class='price'>$${p.price}</div><div class='actions'><button class='btn ver'>Ver</button><button class='btn add'>Agregar</button><button class='fav'>★ Favorito</button></div>`;grid.appendChild(card);card.querySelector('.ver').onclick=()=>openModal(p);card.querySelector('.add').onclick=()=>addToCart(p);card.querySelector('.fav').onclick=(e)=>toggleFavorite(p,e.target);});renderFavorites();});const modal=document.getElementById('product-modal');function openModal(p){modal.style.display='block';document.getElementById('modal-body').innerHTML=`<h2>${p.title}</h2><img src='${p.image}' alt='${p.title}'><p>${p.description}</p><p>Precio: $${p.price}</p>`;}document.querySelector('.modal-close').onclick=()=>modal.style.display='none';const cart=[];function addToCart(p){cart.push(p);localStorage.setItem('cart',JSON.stringify(cart));document.getElementById('cart-count').textContent=cart.length;renderCart();}function renderCart(){const list=document.getElementById('cart-list');const totalEl=document.getElementById('cart-total');list.innerHTML='';let total=0;cart.forEach(i=>{const line=document.createElement('div');line.className='cart-item';line.textContent=`${i.title} - $${i.price}`;list.appendChild(line);total+=i.price;});totalEl.textContent=`Total: $${total}`;}function toggleFavorite(p,btn){let favs=JSON.parse(localStorage.getItem('favorites')||'[]');if(favs.find(f=>f.id===p.id)){favs=favs.filter(f=>f.id!==p.id);btn.classList.remove('active');}else{favs.push(p);btn.classList.add('active');}localStorage.setItem('favorites',JSON.stringify(favs));renderFavorites();}function renderFavorites(){const favGrid=document.getElementById('favorites-grid');favGrid.innerHTML='';let favs=JSON.parse(localStorage.getItem('favorites')||'[]');favs.forEach(p=>{const card=document.createElement('div');card.className='card';card.innerHTML=`<img src='${p.image}' alt='${p.title}'><div class='title'>${p.title}</div><div class='price'>$${p.price}</div>`;favGrid.appendChild(card);});}document.getElementById('contact-form').onsubmit=e=>{e.preventDefault();document.getElementById('form-messages').textContent='Envío exitoso';setTimeout(()=>{window.location.href='gracias.html';},1000);};});